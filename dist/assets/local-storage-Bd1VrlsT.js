(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const n={USERS:"users",PROFILES:"profiles",PRODUCTS:"products",CHANNELS:"channels",USER_NFTS:"user_nfts",TRANSACTIONS:"transactions",PURCHASED_NFTS:"purchased_nfts"},u={products:[{id:"1",name:"朝採れ野菜セットNFT",location:"長野県",price:5e4,rating:4.8,sales:120,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=vegetables1",description:"山田農園で朝採れた新鮮な季節の野菜をデジタルアートで表現。",channel_id:"1",sold:!1},{id:"2",name:"有機りんごNFT",location:"長野県",price:75e3,rating:4.5,sales:85,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=apple1",description:"無農薬で育てた蜜入りりんごの収穫の瞬間を切り取ったアート作品。",channel_id:"1",sold:!1},{id:"3",name:"山田農園の四季NFT",location:"長野県",price:45e3,rating:4.7,sales:150,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=seasons1",description:"一年を通じて変化する農園の風景を四季折々で表現。",channel_id:"1",sold:!1},{id:"4",name:"伝統野菜の物語NFT",location:"長野県",price:6e4,rating:4.6,sales:95,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=traditional1",description:"代々受け継がれてきた伝統野菜の栽培方法と歴史を表現。",channel_id:"1",sold:!1},{id:"5",name:"朝焼けの牧場NFT",location:"千葉県",price:55e3,rating:4.7,sales:110,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=sunrise1",description:"海辺の牧場で撮影された美しい朝焼けの風景。",channel_id:"2",sold:!1},{id:"6",name:"ジャージー牛の一日NFT",location:"千葉県",price:7e4,rating:4.6,sales:80,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=jersey1",description:"牧場のジャージー牛たちの日常を切り取った作品。",channel_id:"2",sold:!1},{id:"7",name:"海風と緑のハーモニーNFT",location:"千葉県",price:48e3,rating:4.8,sales:130,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=harmony1",description:"潮風に揺れる牧草地の美しい風景を表現。",channel_id:"2",sold:!1},{id:"8",name:"大地の恵みNFT",location:"北海道",price:65e3,rating:4.9,sales:140,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=harvest1",description:"広大な大地で育まれた作物の収穫風景。",channel_id:"3",sold:!1},{id:"9",name:"北の大地の物語NFT",location:"北海道",price:8e4,rating:4.8,sales:95,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=story1",description:"北海道の雄大な自然と農業の調和を表現。",channel_id:"3",sold:!1},{id:"10",name:"雪解けの春NFT",location:"北海道",price:58e3,rating:4.7,sales:115,image_url:"https://api.dicebear.com/7.x/shapes/svg?seed=spring1",description:"春を迎えた畑の目覚めを切り取った瞬間。",channel_id:"3",sold:!1}],channels:[{id:"1",name:"山田農園",image_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=yamada",likes:15e3,is_live:!0,description:"代々続く有機農法にこだわる農園です。新鮮な野菜とともに、農園の四季折々の風景をNFTとして提供しています。",location:"長野県",specialties:["有機野菜","果物","山菜"],farming_style:"有機農法",established:"1950年"},{id:"2",name:"海辺の牧場",image_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=umibe",likes:12e3,is_live:!1,description:"潮風と緑豊かな環境で育つ牧場の動物たちの日常をNFTに。自然との共生を大切にしています。",location:"千葉県",specialties:["乳製品","放牧卵","食肉"],farming_style:"放牧式",established:"1985年"},{id:"3",name:"緑の大地農場",image_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=midori",likes:18e3,is_live:!0,description:"北海道の広大な大地で、自然と共に歩む農業を実践。四季折々の風景と収穫の喜びをNFTに込めています。",location:"北海道",specialties:["小麦","大豆","じゃがいも"],farming_style:"自然循環農法",established:"1975年"}]};function g(){Object.entries(n).forEach(([t,r])=>{localStorage.getItem(r)||localStorage.setItem(r,JSON.stringify(u[r.toLowerCase()]||[]))})}async function f({email:t,password:r}){const a=JSON.parse(localStorage.getItem(n.USERS)||"[]").find(s=>s.email===t&&s.password===r);if(!a)throw new Error("Invalid login credentials");return localStorage.setItem("currentUser",JSON.stringify(a)),{user:a}}async function m({email:t,password:r,options:e}){var l;const a=JSON.parse(localStorage.getItem(n.USERS)||"[]");if(a.some(d=>d.email===t))throw new Error("User already registered");const s={id:crypto.randomUUID(),email:t,password:r,...e==null?void 0:e.data};a.push(s),localStorage.setItem(n.USERS,JSON.stringify(a));const i=JSON.parse(localStorage.getItem(n.PROFILES)||"[]"),o={id:s.id,email:s.email,username:((l=e==null?void 0:e.data)==null?void 0:l.username)||`User${s.id.substring(0,8)}`,points:1e3,created_at:new Date().toISOString()};return i.push(o),localStorage.setItem(n.PROFILES,JSON.stringify(i)),{user:s}}async function S(){localStorage.removeItem("currentUser")}async function c(){const t=localStorage.getItem("currentUser");return t?{user:JSON.parse(t)}:{user:null}}async function h(){const{user:t}=await c();return t?JSON.parse(localStorage.getItem(n.PROFILES)||"[]").find(e=>e.id===t.id):null}async function N(t){const{user:r}=await c();if(!r)throw new Error("User not authenticated");const e=JSON.parse(localStorage.getItem(n.PROFILES)||"[]"),a=e.findIndex(s=>s.id===r.id);if(a===-1)throw new Error("Profile not found");return e[a]={...e[a],...t,updated_at:new Date().toISOString()},localStorage.setItem(n.PROFILES,JSON.stringify(e)),e[a]}async function p(){const t=JSON.parse(localStorage.getItem(n.PRODUCTS)||"[]"),r=JSON.parse(localStorage.getItem(n.PURCHASED_NFTS)||"[]");return t.map(e=>({...e,sold:r.includes(e.id)}))}async function _({sortBy:t,region:r}){let e=await p();if(e=e.filter(a=>!a.sold),r&&(e=e.filter(a=>a.location.toLowerCase().includes(r.toLowerCase()))),t)switch(t){case"name":e.sort((a,s)=>a.name.localeCompare(s.name));break;case"rating":e.sort((a,s)=>s.rating-a.rating);break;case"price":e.sort((a,s)=>a.price-s.price);break}return e}async function O(){return JSON.parse(localStorage.getItem(n.CHANNELS)||"[]")}async function y(){const{user:t}=await c();return t?JSON.parse(localStorage.getItem(n.USER_NFTS)||"[]").filter(e=>e.user_id===t.id):[]}async function I(){const{user:t}=await c();return t?JSON.parse(localStorage.getItem(n.TRANSACTIONS)||"[]").filter(e=>e.user_id===t.id):[]}export{O as a,_ as b,y as c,I as d,c as e,p as f,h as g,f as h,g as i,m as j,S as s,N as u};
//# sourceMappingURL=local-storage-Bd1VrlsT.js.map
